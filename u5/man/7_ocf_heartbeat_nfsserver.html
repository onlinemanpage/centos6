<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 04:10:55 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_NFSSER(7) OCF resource agents
OCF_HEARTBEAT_NFSSER(7)</p>

<p>NAME ocf_heartbeat_nfsserver - Manages an NFS server</p>

<p>SYNOPSIS nfsserver [start | stop | monitor | meta-data |
validate-all]</p>

<p>DESCRIPTION Nfsserver helps to manage the Linux nfs
server as a failover-able resource in Linux-HA. It depends
on Linux specific NFS implementation details, so is
considered not portable to other platforms yet.</p>

<p>SUPPORTED PARAMETERS nfs_init_script The default init
script shipped with the Linux distro. The nfsserver resource
agent offloads the start/stop/monitor work to the init
script because the procedure to start/stop/monitor nfsserver
varies on different Linux distro. In the event that this
option is not set, this agent will attempt to use an init
script at this location, /etc/init.d/nfs, or detect a
systemd unit-file to use in the event that no init script is
detected.</p>

<p>(optional, string, default &quot;auto
detected&quot;)</p>

<p>nfs_notify_cmd The tool to send out NSM reboot
notification; it should be either sm-notify or rpc.statd.
Failover of nfsserver can be considered as rebooting to
different machines. The nfsserver resource agent use this
command to notify all clients about the occurrence of
failover.</p>

<p>(optional, string, default
&quot;/usr/sbin/sm-notify&quot;)</p>

<p>nfs_notify_foreground Keeps the notify tool attached to
its controlling terminal and running in the foreground.</p>

<p>(optional, boolean, default false)</p>

<p>nfs_smnotify_retry_time Specifies the length of
sm-notify retry time, in minutes, to continue retrying
notifications to unresponsive hosts. If this option is not
specified, sm-notify attempts to send notifications for 15
minutes. Specifying a value of 0 causes sm-notify to
continue sending notifications to unresponsive peers until
it is manually killed.</p>

<p>(optional, integer, no default)</p>

<p>nfs_shared_infodir The nfsserver resource agent will
save nfs related information in this specific directory. And
this directory must be able to fail-over before nfsserver
itself.</p>

<p>(required, string, no default)</p>

<p>nfs_ip Comma separated list of floating IP addresses
used to access the nfs service</p>

<p>(required, string, no default)</p>

<p>rpcpipefs_dir The mount point for the sunrpc file
system. Default is /var/lib/nfs/rpc_pipefs. This script will
mount (bind) nfs_shared_infodir on /var/lib/nfs/ (cannot be
changed), and this script will mount the sunrpc file system
on /var/lib/nfs/rpc_pipefs (default, can be changed by this
parameter). If you want to move only rpc_pipefs/ (e.g. to
keep rpc_pipefs/ local) from default, please set this
value.</p>

<p>(optional, string, default
&quot;/var/lib/nfs/rpc_pipefs&quot;)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
40.</p>

<p>stop Stops the resource. Suggested minimum timeout:
20s.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 20s. Suggested interval: 10.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 30.</p>

<p>EXAMPLE The following is an example configuration for a
nfsserver resource using the crm(8) shell:</p>

<p>primitive p_nfsserver ocf:heartbeat:nfsserver params
nfs_shared_infodir=string nfs_ip=string op monitor
depth=&quot;0&quot; timeout=&quot;20s&quot;
interval=&quot;10&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/nfsserver_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>resource-agents 3.9.2 10/10/2013
OCF_HEARTBEAT_NFSSER(7)</p>
<hr>
</body>
</html>
