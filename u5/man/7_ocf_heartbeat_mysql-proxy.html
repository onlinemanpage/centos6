<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 04:10:55 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>OCF_HEARTBEAT_MYSQL() OCF_HEARTBEAT_MYSQL()</p>

<p>NAME ocf_heartbeat_mysql-proxy - Manages a MySQL Proxy
instance</p>

<p>SYNOPSIS mysql-proxy [start | stop | monitor | meta-data
| validate-all]</p>

<p>DESCRIPTION This script manages MySQL Proxy as an OCF
resource in a high-availability setup.</p>

<p>The default monitor operation will verify that
mysql-proxy is running.</p>

<p>The level 10 monitor operation is left out intentionally
for possible future enhancements in conjunction with the
admin plugin.</p>

<p>The level 20 monitor operation will perform a SELECT on
a given table to verify that the connection to a back-end
server is actually working.</p>

<p>Tested with MySQL Proxy 0.8.1 and 0.8.3 on Debian
6.0.</p>

<p>SUPPORTED PARAMETERS binary Full path to the MySQL Proxy
binary. For example, &quot;/usr/sbin/mysql-proxy&quot;.</p>

<p>(optional, string, default
&quot;/usr/sbin/mysql-proxy&quot;)</p>

<p>client_binary Location of the MySQL client binary.</p>

<p>(optional, string, default &quot;mysql&quot;)</p>

<p>defaults_file Full path to a MySQL Proxy configuration
file. For example, &quot;/etc/mysql-proxy.conf&quot;.</p>

<p>(optional, string, no default)</p>

<p>proxy_backend_addresses Address:port of the remote
back-end servers (default: 127.0.0.1:3306).</p>

<p>(optional, string, default
&quot;127.0.0.1:3306&quot;)</p>

<p>proxy_read_only_backend_addresses Address:port of the
remote (read only) slave-server (default: ).</p>

<p>(optional, string, default
&quot;127.0.0.1:3306&quot;)</p>

<p>proxy_address Listening address:port of the proxy server
(default: :4040). You can also specify a socket like
&quot;/tmp/mysql-proxy.sock&quot;.</p>

<p>(optional, string, default &quot;:4040&quot;)</p>

<p>log_level Log all messages of level
(error|warning|info|message|debug|) or higher. An empty
value disables logging.</p>

<p>(optional, string, no default)</p>

<p>keepalive Try to restart the proxy if it crashed
(default: ). Valid values: true or false. An empty value
equals &quot;false&quot;.</p>

<p>(optional, string, no default)</p>

<p>plugins Whitespace separated list of plugins to load
(default: ). Note: The admin plugin will be auto-loaded in
case you specify an admin_* parameter.</p>

<p>(optional, string, no default)</p>

<p>admin_address Listening address:port of the admin plugin
(default: 127.0.0.1:4041). Note: The admin plugin will be
auto-loaded in case you specify an admin_* parameter.</p>

<p>(optional, string, default
&quot;127.0.0.1:4041&quot;)</p>

<p>admin_username Username for the admin plugin (default:
). Required since MySQL Proxy 0.8.1, if the admin plugin is
loaded. Note: The admin plugin will be auto-loaded in case
you specify an admin_* parameter.</p>

<p>(optional, string, no default)</p>

<p>admin_password Password for the admin plugin (default:
). Required since MySQL Proxy 0.8.1, if the admin plugin is
loaded. Note: The admin plugin will be auto-loaded in case
you specify an admin_* parameter.</p>

<p>(optional, string, no default)</p>

<p>admin_lua_script Script to execute by the admin plugin.
Required since MySQL Proxy 0.8.1, if the admin plugin is
loaded. Note: The admin plugin will be auto-loaded in case
you specify an admin_* parameter.</p>

<p>(optional, string, no default)</p>

<p>test_table Table to be tested in monitor statement (in
database.table notation)</p>

<p>(optional, string, default &quot;mysql.user&quot;)</p>

<p>test_user MySQL test user</p>

<p>(optional, string, no default)</p>

<p>test_passwd MySQL test user password</p>

<p>(optional, string, no default)</p>

<p>parameters The MySQL Proxy daemon may be called with
additional parameters. Specify any of them here.</p>

<p>(optional, string, no default)</p>

<p>pidfile PID file</p>

<p>(unique, optional, string, default
&quot;/var/run/resource-agents/mysql-proxy-default.pid&quot;)</p>

<p>SUPPORTED ACTIONS This resource agent supports the
following actions (operations):</p>

<p>start Starts the resource. Suggested minimum timeout:
30s.</p>

<p>stop Stops the resource. Suggested minimum timeout:
30s.</p>

<p>reload Suggested minimum timeout: 30s.</p>

<p>monitor Performs a detailed status check. Suggested
minimum timeout: 20s. Suggested interval: 60s.</p>

<p>validate-all Performs a validation of the resource
configuration. Suggested minimum timeout: 30s.</p>

<p>meta-data Retrieves resource agent metadata (internal
use only). Suggested minimum timeout: 5s.</p>

<p>EXAMPLE The following is an example configuration for a
mysql-proxy resource using the crm(8) shell:</p>

<p>primitive p_mysql-proxy ocf:heartbeat:mysql-proxy op
monitor depth=&quot;0&quot; timeout=&quot;20s&quot;
interval=&quot;60s&quot;</p>

<p>SEE ALSO
http://www.linux-ha.org/wiki/mysql-proxy_(resource_agent)</p>

<p>AUTHOR Linux-HA contributors (see the resource agent
source for information about individual authors)</p>

<p>OCF_HEARTBEAT_MYSQL()</p>
<hr>
</body>
</html>
