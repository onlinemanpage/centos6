<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 05:20:19 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>virt-ls(1) Virtualization Support virt-ls(1)</p>

<p>NAME virt-ls - List files in a virtual machine</p>

<p>SYNOPSIS virt-ls [--options] -d domname directory
[directory ...]</p>

<p>virt-ls [--options] -a disk.img [-a disk.img ...]
directory [directory ...]</p>

<p>Old style:</p>

<p>virt-ls [--options] domname directory</p>

<p>virt-ls [--options] disk.img [disk.img ...]
directory</p>

<p>DESCRIPTION &quot;virt-ls&quot; is a command line tool
to list the names of files in a directory inside a virtual
machine or disk image.</p>

<p>Multiple directory names can be given, in which case the
output from each is concatenated.</p>

<p>&quot;virt-ls&quot; is just a simple wrapper around
libguestfs(3) functionality. For more complex cases you
should look at the guestfish(1) tool.</p>

<p>To list directories from a libvirt guest use the -d
option to specify the name of the guest. For a disk image,
use the -a option.</p>

<p>&quot;virt-ls&quot; can be used in one of three modes:
simple, long and recursive. A simple listing is like the
ordinary ls(1) command:</p>

<p>$ virt-ls -d myguest / bin boot [etc.]</p>

<p>With the &quot;-l&quot; (&quot;--long&quot;) option,
&quot;virt-ls&quot; shows more detail:</p>

<p>$ virt-ls -l -d myguest / total 204 dr-xr-xr-x. 2 root
root 4096 2009-08-25 19:06 bin dr-xr-xr-x. 5 root root 3072
2009-08-25 19:06 boot [etc.]</p>

<p>With the &quot;-R&quot; (&quot;--recursive&quot;)
option, &quot;virt-ls&quot; lists the names of files and
directories recursively:</p>

<p>$ virt-ls -R -d myguest /tmp foo foo/bar [etc.]</p>

<p>You cannot combine these options. To do more complicated
things, use guestfish(1).</p>

<p>OPTIONS --help Display brief help.</p>

<p>-a file --add file Add file which should be a disk image
from a virtual machine. If the virtual machine has multiple
block devices, you must supply all of them with separate -a
options.</p>

<p>The format of the disk image is auto-detected. To
override this and force a particular format use the
--format=.. option.</p>

<p>-c URI --connect URI If using libvirt, connect to the
given URI. If omitted, then we connect to the default
libvirt hypervisor.</p>

<p>If you specify guest block devices directly (-a), then
libvirt is not used at all.</p>

<p>-d guest --domain guest Add all the disks from the named
libvirt guest.</p>

<p>--echo-keys When prompting for keys and passphrases,
virt-ls normally turns echoing off so you cannot see what
you are typing. If you are not worried about Tempest attacks
and there is no one else in the room you can specify this
flag to see what you are typing.</p>

<p>--format=raw|qcow2|.. --format The default for the -a
option is to auto-detect the format of the disk image. Using
this forces the disk format for -a options which follow on
the command line. Using --format with no argument switches
back to auto-detection for subsequent -a options.</p>

<p>For example:</p>

<p>virt-ls --format=raw -a disk.img /dir</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot;.</p>

<p>virt-ls --format=raw -a disk.img --format -a another.img
/dir</p>

<p>forces raw format (no auto-detection) for
&quot;disk.img&quot; and reverts to auto-detection for
&quot;another.img&quot;.</p>

<p>If you have untrusted raw-format guest disk images, you
should use this option to specify the disk format. This
avoids a possible security problem with malicious guests
(CVE-2010-3851).</p>

<p>--keys-from-stdin Read key or passphrase parameters from
stdin. The default is to try to read passphrases from the
user by opening &quot;/dev/tty&quot;.</p>

<p>-l | --long -R | --recursive Select the mode. With
neither of these options, &quot;virt-ls&quot; produces a
simple, flat list of the files in the named directory.</p>

<p>&quot;virt-ls -l&quot; produces a &quot;long
listing&quot;, which shows more detail (just like the plain
&quot;ls -l&quot; command).</p>

<p>&quot;virt-ls -R&quot; produces a recursive list of
files starting at the named directory. See the documentation
for &quot;guestfs_find0&quot; in guestfs(3) for precise
details.</p>

<p>You cannot combine these options.</p>

<p>-v --verbose Enable verbose messages for debugging.</p>

<p>-V --version Display version number and exit.</p>

<p>-x Enable tracing of libguestfs API calls.</p>

<p>OLD-STYLE COMMAND LINE ARGUMENTS Previous versions of
virt-ls allowed you to write either:</p>

<p>virt-ls disk.img [disk.img ...] /dir</p>

<p>or</p>

<p>virt-ls guestname /dir</p>

<p>whereas in this version you should use -a or -d
respectively to avoid the confusing case where a disk image
might have the same name as a guest.</p>

<p>For compatibility the old style is still supported.</p>

<p>SHELL QUOTING Libvirt guest names can contain arbitrary
characters, some of which have meaning to the shell such as
&quot;#&quot; and space. You may need to quote or escape
these characters on the command line. See the shell manual
page sh(1) for details.</p>

<p>SEE ALSO guestfs(3), guestfish(1), virt-cat(1),
virt-tar(1), Sys::Guestfs(3), Sys::Guestfs::Lib(3),
Sys::Virt(3), &lt;http://libguestfs.org/&gt;.</p>

<p>AUTHOR Richard W.M. Jones
&lt;http://people.redhat.com/~rjones/&gt;</p>

<p>COPYRIGHT Copyright (C) 2009 Red Hat Inc.</p>

<p>This program is free software; you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 2 of the License, or (at your option) any later
version.</p>

<p>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p>You should have received a copy of the GNU General
Public License along with this program; if not, write to the
Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA
02139, USA.</p>

<p>libguestfs-1.7.17 2011-04-12 virt-ls(1)</p>
<hr>
</body>
</html>
