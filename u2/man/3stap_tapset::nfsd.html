<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 05:21:47 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>TAPSET::NFSD(3stap) TAPSET::NFSD(3stap)</p>

<p>NAME tapset::nfsd - systemtap NFS server side probe
points</p>

<p>DESCRIPTION This family of probe points is used to probe
NFS activities on server side. Because there is only one
function, i.e., nfsd4_proc_compound in proc level for NFSv4,
all the following nfsd.proc probe points except
nfsd.proc.compound are only for NFSv2 and NFSv3.</p>

<p>It contains the following probe points:</p>

<p>nfsd.proc.lookup</p>

<p>Fires whenever client opens/searches file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of parent dir</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>nfsd.proc.read</p>

<p>Fires whenever client reads file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of file</p>

<p>count,size number of bytes to be read</p>

<p>offset the offset of file</p>

<p>vec struct kvec, includes buf address in kernel address
and the length of each buffer</p>

<p>vlen number of blocks to be read</p>

<p>nfsd.proc.write</p>

<p>Fires whenever client writes data to file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of file</p>

<p>count,size number of bytes to written</p>

<p>offset the offset of file</p>

<p>vec struct kvec, includes buf address in kernel address
and the length of each buffer</p>

<p>vlen number of blocks to written</p>

<p>stable argp-&gt;stable(only for nfs.proc3.write)</p>

<p>nfsd.proc.commit</p>

<p>Fires whenever client does a commit operation</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of file</p>

<p>count,size number of bytes to written</p>

<p>offset the offset of file</p>

<p>nfsd.proc.create</p>

<p>Fires whenever client creates a file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of parent dir</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>nfsd.proc.remove</p>

<p>Fires whenever client removes a file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of file</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>nfsd.proc.rename</p>

<p>Fires whenever client renames a file on server</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>fh the pointer to file handler of old path</p>

<p>tfh the pointer to file handler of new path</p>

<p>filename old file name</p>

<p>tname new file name</p>

<p>filelen the length of old file name</p>

<p>tlen the length of new file name</p>

<p>nfsd.proc.compound</p>

<p>Fires whenever server receives a NFSV4 operation from
client</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>num number of file operation</p>

<p>op head of operation list</p>

<p>nfsd.open</p>

<p>Fires whenever server opens file</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>access type of open (read/write/commit/readdir...)</p>

<p>type type of file(regular file or dir)</p>

<p>nfsd.read</p>

<p>Fires whenever server reads file</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>file argument :file, indicates if the file has been
opened.</p>

<p>count,size number of bytes to be read</p>

<p>offset the offset of file</p>

<p>vec struct kvec, includes buf address in kernel address
and the length of each buffer</p>

<p>vlen number of blocks to be read</p>

<p>nfsd.write</p>

<p>Fires whenever server writes file</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>file argument :file, indicates if the file has been
opened.</p>

<p>count,size number of bytes to be read</p>

<p>offset the offset of file</p>

<p>vec struct kvec, includes buf address in kernel address
and the length of each buffer</p>

<p>vlen number of blocks to be written</p>

<p>nfsd.commit</p>

<p>Fires when server commits all pending writes to stable
storage</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>count,size number of bytes to be read</p>

<p>offset the offset of file</p>

<p>nfsd.lookup</p>

<p>Fires whenever client opens/searches file on server</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>nfsd.create</p>

<p>Fires when client creates a
file(regular,dir,device,fifo) on server side, sometimes nfsd
will call nfsd_create_v3 instead of this function</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>type file type(regular,dir,device,fifo ...)</p>

<p>iap_valid Attribute flags</p>

<p>iap_mode file access mod</p>

<p>nfsd.createv3</p>

<p>Fires when client creates a regular file or set file
attributes on server side, only called by nfsd3_proc_create
and nfsd4_open (op_claim_type is NFS4_OPEN_CLAIM_NULL)</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>iap_valid Attribute flags</p>

<p>iap_mode file access mode</p>

<p>createmode create mode. The possible values could be:
NFS3_CREATE_EXCLUSIVE,NFS3_CREATE_UNCHECKED,NFS3_CRE-
ATE_GUARDED</p>

<p>truncp trunp arguments, indicates if the file should be
truncated</p>

<p>verfier file attributes (atime,mtime,mode). Its used to
reset file attributes for CREATE_EXCLUSIVE</p>

<p>nfsd.unlink</p>

<p>Fires when client removes a file or a dir on server
side,</p>

<p>Arguments:</p>

<p>fh file handle (the first part is the length of the file
handle)</p>

<p>filename file name</p>

<p>filelen the length of file name</p>

<p>type file type(file or dir)</p>

<p>nfsd.rename Fires when clients rename a file on server
side</p>

<p>Arguments:</p>

<p>fh file handler of old path</p>

<p>tfh file handler of new path</p>

<p>filename old file name</p>

<p>tname new file name</p>

<p>flen length of old file name</p>

<p>tlen length of new file name</p>

<p>nfsd.close</p>

<p>Fires whenever server closes file</p>

<p>Arguments:</p>

<p>filename file name</p>

<p>nfsd.dispatch</p>

<p>Fires whenever server receives NFS operation from
client</p>

<p>Arguments:</p>

<p>client_ip the ip address of client</p>

<p>proto transfer protocol</p>

<p>version nfs version</p>

<p>xid transmission id</p>

<p>prog program number</p>

<p>proc procedure number</p>

<p>SEE ALSO stap(1), stapprobes(3stap)</p>

<p>IBM TAPSET::NFSD(3stap)</p>
<hr>
</body>
</html>
