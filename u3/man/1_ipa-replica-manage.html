<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 04:23:48 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>ipa-replica-manage(1) FreeIPA Manual Pages
ipa-replica-manage(1)</p>

<p>NAME ipa-replica-manage - Manage an IPA replica</p>

<p>SYNOPSIS ipa-replica-manage [OPTION]...
[connect|disconnect|del|list|re-ini- tialize|force-sync]</p>

<p>DESCRIPTION Manages the replication agreements of an IPA
server.</p>

<p>connect [SERVER_A] &lt;SERVER_B&gt; - Adds a new
replication agreement between SERVER_A/localhost and
SERVER_B</p>

<p>disconnect [SERVER_A] &lt;SERVER_B&gt; - Removes a
replication agreement between SERVER_A/localhost and
SERVER_B</p>

<p>del &lt;SERVER&gt; - Removes all replication agreements
and data about SERVER</p>

<p>list [SERVER] - Lists all the servers or the list of
agreements of SERVER</p>

<p>re-initialize - Forces a full re-initialization of the
IPA server retrieving data from the server specified with
the --from option</p>

<p>force-sync - Immediately flush any data to be replicated
from a server specified with the --from option</p>

<p>The connect and disconnect options are used to manage
the replication topology. When a replica is created it is
only connected with the mas- ter that created it. The
connect option may be used to connect it to other existing
replicas.</p>

<p>The disconnect option cannot be used to remove the last
link of a replica. To remove a replica from the topology use
the del option.</p>

<p>If a replica is deleted and then re-added within a short
time-frame then the 389-ds instance on the master that
created it should be restarted before re-installing the
replica. The master will have the old service principals
cached which will cause replication to fail.</p>

<p>OPTIONS -H HOST, --host=HOST The IPA server to manage.
The default is the machine on which the command is run Not
honoured by the re-initialize command.</p>

<p>-p DM_PASSWORD, --password=DM_PASSWORD The Directory
Manager password to use for authentication</p>

<p>-v, --verbose Provide additional information</p>

<p>-f, --force Ignore some types of errors, don t prompt
when deleting a master</p>

<p>--binddn=ADMIN_DN Bind DN to use with remote server
(default is cn=Directory Man- ager) - Be careful to quote
this value on the command line</p>

<p>--bindpw=ADMIN_PWD Password for Bind DN to use with
remote server (default is the DM_PASSWORD above)</p>

<p>--winsync Specifies to create/use a Windows Sync
Agreement</p>

<p>--cacert=/path/to/cacertfile Full path and filename of
CA certificate to use with TLS/SSL to the remote server -
this CA certificate will be installed in the directory
servers certificate database</p>

<p>--win-subtree=cn=Users,dc=example,dc=com DN of Windows
subtree containing the users you want to sync (default
cn=Users,&lt;domain suffix&gt; - this is typically what Win-
dows AD uses as the default value) - Be careful to quote
this value on the command line</p>

<p>--passsync=PASSSYNC_PWD Password for the Windows
PassSync user. Required when using --winsync. This does not
mean you have to use the PassSync ser- vice.</p>

<p>--from=SERVER The server to pull the data from, used by
the re-initialize and force-sync commands.</p>

<p>EXAMPLES List all masters: # ipa-replica-manage list
srv1.example.com srv2.example.com srv3.example.com
srv4.example.com</p>

<p>List a servers replication agreements. #
ipa-replica-manage list srv1.example.com srv2.example.com
srv3.example.com</p>

<p>Re-initialize a replica: # ipa-replica-manage
re-initialize --from srv2.example.com</p>

<p>This will re-initialize the data on the server where you
execute the command, retrieving the data from the
srv2.example.com replica</p>

<p>Add a new replication agreement: # ipa-replica-manage
connect srv2.example.com srv4.example.com</p>

<p>Remove an existing replication agreement: #
ipa-replica-manage disconnect srv1.example.com srv3.exam-
ple.com</p>

<p>Completely remove a replica: # ipa-replica-manage del
srv4.example.com</p>

<p>Using connect/disconnect you can manage the replication
topology.</p>

<p>WINSYNC Creating a Windows AD Synchronization agreement
is similar to creating an IPA replication agreement, there
are just a couple of extra steps.</p>

<p>A special user entry is created for the PassSync
service. The DN of this entry is
uid=passsync,cn=sysaccounts,cn=etc,&lt;basedn&gt;. You are
not required to use PassSync to use a Windows
synchronization agreement but setting a password for the
user is required.</p>

<p>The following examples use the AD administrator account
as the synchro- nization user. This is not mandatory but the
user must have read-access to the subtree.</p>

<p>1. Transfer the base64-encoded Windows AD CA Certficate
to your IPA Server</p>

<p>2. Remove any existing kerberos credentials #
kdestroy</p>

<p>3) Add the winsync replication agreement #
ipa-replica-manage connect --winsync --passsync=&lt;bind-
pwd_for_syncuser_that will_be_used_for_agreement&gt; --cac-
ert=/path/to/adscacert/WIN-CA.cer --binddn
&quot;cn=administra-
tor,cn=users,dc=ad,dc=example,dc=com&quot; --bindpw
&lt;ads_administra- tor_password&gt; -v
&lt;adserver.fqdn&gt;</p>

<p>You will be prompted to supply the Directory Manager s
password.</p>

<p>Create a winsync replication agreement:</p>

<p># ipa-replica-manage connect --winsync
--passsync=MySecret --cacert=/root/WIN-CA.cer --binddn
&quot;cn=administra-
tor,cn=users,dc=ad,dc=example,dc=com&quot; --bindpw MySecret
-v win- dows.ad.example.com</p>

<p>Remove a winsync replication agreement: #
ipa-replica-manage disconnect windows.ad.example.com</p>

<p>EXIT STATUS 0 if the command was successful</p>

<p>1 if an error occurred</p>

<p>FreeIPA Mar 14 2008 ipa-replica-manage(1)</p>
<hr>
</body>
</html>
