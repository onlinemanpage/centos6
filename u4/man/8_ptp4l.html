<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Fri Nov 18 04:29:53 2016 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p>PTP4l(8) PTP4l(8)</p>

<p>NAME ptp4l - PTP Boundary/Ordinary Clock</p>

<p>SYNOPSIS ptp4l [ -A | -E | -P ] [ -2 | -4 | -6 ] [ -H |
-S | -L ] [ -f config ] [ -p phc-device ] [ -s ] [ -l
print-level ] [ -q ] [ -v ] [ -i inter- face ] ...</p>

<p>DESCRIPTION ptp4l is an implementation of the Precision
Time Protocol (PTP) accord- ing to IEEE standard 1588 for
Linux. It implements Boundary Clock (BC) and Ordinary Clock
(OC).</p>

<p>OPTIONS -A Select the delay mechanism automatically.
Start with E2E and switch to P2P when a peer delay request
is received.</p>

<p>-E Select the delay request-response (E2E) mechanism.
This is the default mechanism.</p>

<p>-P Select the peer delay (P2P) mechanism.</p>

<p>-2 Select the IEEE 802.3 network transport.</p>

<p>-4 Select the UDP IPv4 network transport. This is the
default transport.</p>

<p>-6 Select the UDP IPv6 network transport.</p>

<p>-H Select the hardware time stamping. All ports
specified by the -i option and in the configuration file
must be attached to the same PTP hardware clock (PHC). This
is the default time stamp- ing.</p>

<p>-S Select the software time stamping.</p>

<p>-L Select the legacy hardware time stamping.</p>

<p>-f config Read configuration from the specified file. No
configuration file is read by default.</p>

<p>-p phc-device With hardware time stamping, force which
PHC device (e.g. /dev/ptp0) should be used.</p>

<p>-s Enable the slaveOnly mode.</p>

<p>-l print-level Set the maximum syslog level of messages
which should be printed or sent to the system logger. The
default is 6 (LOG_INFO).</p>

<p>-q Dont send messages to the system logger.</p>

<p>-v Print messages to the standard output.</p>

<p>-i interface Specify a PTP port, it may be used multiple
times. At least one port must be specified by this option or
in the configuration file.</p>

<p>-h Display a help message.</p>

<p>CONFIGURATION FILE The configuration file is divided
into sections. Each section starts with a line containing
its name enclosed in brackets and it follows with settings.
Each setting is placed on a separate line, it contains the
name of the option and the value separated by whitespace
charac- ters. Empty lines and lines starting with # are
ignored.</p>

<p>The global section (indicated as [global]) sets the
program options, clock options and default port options.
Other sections are port spe- cific sections and they
override the default port options. The name of the section
is the name of the configured port (e.g. [eth0]). Ports
specified in the configuration file don t need to be
specified by the -i option. An empty port section can be
used to replace the command line option.</p>

<p>PORT OPTIONS logAnnounceInterval The mean time interval
between Announce messages. A shorter interval makes ptp4l
react faster to the changes in the master- slave hierarchy.
The interval should be the same in the whole domain. Its
specified as a power of two in seconds. The default is 1 (2
seconds).</p>

<p>logSyncInterval The mean time interval between Sync
messages. A shorter interval may improve accuracy of the
local clock. It s specified as a power of two in seconds.
The default is 0 (1 second).</p>

<p>logMinDelayReqInterval The minimum permitted mean time
interval between Delay_Req mes- sages. A shorter interval
makes ptp4l react faster to the changes in the path delay.
Its specified as a power of two in seconds. The default is 0
(1 second).</p>

<p>logMinPdelayReqInterval The minimum permitted mean time
interval between Pdelay_Req mes- sages. Its specified as a
power of two in seconds. The default is 0 (1 second).</p>

<p>announceReceiptTimeout The number of missed Announce
messages before the last Announce messages expires. The
default is 3.</p>

<p>transportSpecific The transport specific field. Must be
in the range 0 to 255. The default is 0.</p>

<p>path_trace_enabled Enable the mechanism used to trace
the route of the Announce messages. The default is 0
(disabled).</p>

<p>follow_up_info Include the 802.1AS data in the Follow_Up
messages if enabled. The default is 0 (disabled).</p>

<p>delay_mechanism Select the delay mechanism. Possible
values are E2E, P2P and Auto. The default is E2E.</p>

<p>network_transport Select the network transport. Possible
values are UDPv4, UDPv6 and L2. The default is UDPv4.</p>

<p>PROGRAM AND CLOCK OPTIONS twoStepFlag The local clock is
a two-step clock if enabled. One-step clocks are not
supported yet. The default is 1 (enabled).</p>

<p>slaveOnly The local clock is a slave-only clock if
enabled. The default is 0 (disabled).</p>

<p>priority1 The priority1 attribute of the local clock. It
is used in the best master selection algorithm, lower values
take precedence. Must be in the range 0 to 255. The default
is 128.</p>

<p>priority2 The priority2 attribute of the local clock. It
is used in the best master selection algorithm, lower values
take precedence. Must be in the range 0 to 255. The default
is 128.</p>

<p>clockClass The clockClass attribute of the local clock.
It denotes the traceability of the time distributed by the
grandmaster clock. The default is 248.</p>

<p>clockAccuracy The clockAccuracy attribute of the local
clock. It is used in the best master selection algorithm.
The default is 0xFE.</p>

<p>offsetScaledLogVariance The offsetScaledLogVariance
attribute of the local clock. It characterizes the stability
of the clock. The default is 0xFFFF.</p>

<p>domainNumber The domain attribute of the local clock.
The default is 0.</p>

<p>free_running Don t adjust the local clock if enabled.
The default is 0 (dis- abled).</p>

<p>freq_est_interval The time interval over which is
estimated the ratio of the local and peer clock frequencies.
It is specified as a power of two in seconds. The default is
1 (2 seconds).</p>

<p>assume_two_step Treat one-step responses as two-step if
enabled. It is used to work around buggy 802.1AS switches.
The default is 0 (dis- abled).</p>

<p>tx_timestamp_retries The number of retries to fetch the
tx time stamp from the kernel when a message is sent. The
default is 100.</p>

<p>clock_servo The servo which is used to synchronize the
local clock. Cur- rently only one servo is implemented, a PI
controller. The default is pi.</p>

<p>pi_proportional_const The proportional constant of the
PI controller. When set to 0.0, the value will be selected
from 0.7 and 0.1 for the hardware and software time stamping
respectively. The default is 0.0.</p>

<p>pi_integral_const The integral constant of the PI
controller. When set to 0.0, the value will be selected from
0.3 and 0.001 for the hardware and software time stamping
respectively. The default is 0.0.</p>

<p>pi_offset_const The maximum offset the PI controller
will correct by changing the clock frequency instead of
stepping the clock. When set to 0.0, the controller will
never step the clock. The default is 0.0.</p>

<p>ptp_dst_mac The MAC address where should be PTP messages
sent. Relevant only with L2 transport. The default is
01:1B:19:00:00:00.</p>

<p>p2p_dst_mac The MAC address where should be peer delay
messages the PTP peer. Relevant only with L2 transport. The
default is 01:80:C2:00:00:0E.</p>

<p>logging_level The maximum logging level of messages
which should be printed. The default is 6 (LOG_INFO).</p>

<p>verbose Print messages to the standard output if
enabled. The default is 0 (disabled).</p>

<p>use_syslog Print messages to the system log if enabled.
The default is 1 (enabled).</p>

<p>time_stamping The time stamping method. The allowed
values are hardware, soft- ware and legacy. The default is
hardware.</p>

<p>SEE ALSO pmc(8), phc2sys(8)</p>

<p>linuxptp November 2012 PTP4l(8)</p>
<hr>
</body>
</html>
